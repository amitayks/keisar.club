var T=t=>{throw TypeError(t)};var M=(t,s,r)=>s.has(t)||T("Cannot "+r);var d=(t,s,r)=>(M(t,s,"read from private field"),r?r.call(t):s.get(t)),j=(t,s,r)=>s.has(t)?T("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),x=(t,s,r,n)=>(M(t,s,"write to private field"),n?n.call(t,r):s.set(t,r),r),y=(t,s,r)=>(M(t,s,"access private method"),r);import{d as se,n as z,e as te,Q as Y,g as re,h as ne,i as ie,r as v,k as ae,l as le,m as oe,o as ce,s as _,p as W,w as de,q as ue,c as D,t as he,u as G,a as me,j as e,S as g,f as I,L as Z}from"./index-BeAExvlc.js";import{a as xe}from"./apiProduct-1fX7jGYV.js";import{a as J,C as fe}from"./CategoryCard-COzEHbgX.js";import"./supabase-DUAaTOPe.js";function V(t,s){return t.filter(r=>!s.includes(r))}function ge(t,s,r){const n=t.slice(0);return n[s]=r,n}var O,p,L,P,b,w,C,Q,E,m,B,A,H,F,K,X,pe=(X=class extends se{constructor(s,r,n){super();j(this,m);j(this,O);j(this,p);j(this,L);j(this,P);j(this,b);j(this,w);j(this,C);j(this,Q);j(this,E,[]);x(this,O,s),x(this,P,n),x(this,L,[]),x(this,b,[]),x(this,p,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&d(this,b).forEach(s=>{s.subscribe(r=>{y(this,m,F).call(this,s,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,d(this,b).forEach(s=>{s.destroy()})}setQueries(s,r,n){x(this,L,s),x(this,P,r),z.batch(()=>{const a=d(this,b),i=y(this,m,H).call(this,d(this,L));x(this,E,i),i.forEach(o=>o.observer.setOptions(o.defaultedQueryOptions,n));const l=i.map(o=>o.observer),u=l.map(o=>o.getCurrentResult()),c=l.some((o,k)=>o!==a[k]);a.length===l.length&&!c||(x(this,b,l),x(this,p,u),this.hasListeners()&&(V(a,l).forEach(o=>{o.destroy()}),V(l,a).forEach(o=>{o.subscribe(k=>{y(this,m,F).call(this,o,k)})}),y(this,m,K).call(this)))})}getCurrentResult(){return d(this,p)}getQueries(){return d(this,b).map(s=>s.getCurrentQuery())}getObservers(){return d(this,b)}getOptimisticResult(s,r){const n=y(this,m,H).call(this,s),a=n.map(i=>i.observer.getOptimisticResult(i.defaultedQueryOptions));return[a,i=>y(this,m,A).call(this,i??a,r),()=>y(this,m,B).call(this,a,n)]}},O=new WeakMap,p=new WeakMap,L=new WeakMap,P=new WeakMap,b=new WeakMap,w=new WeakMap,C=new WeakMap,Q=new WeakMap,E=new WeakMap,m=new WeakSet,B=function(s,r){return r.map((n,a)=>{const i=s[a];return n.defaultedQueryOptions.notifyOnChangeProps?i:n.observer.trackResult(i,l=>{r.forEach(u=>{u.observer.trackProp(l)})})})},A=function(s,r){return r?((!d(this,w)||d(this,p)!==d(this,Q)||r!==d(this,C))&&(x(this,C,r),x(this,Q,d(this,p)),x(this,w,te(d(this,w),r(s)))),d(this,w)):s},H=function(s){const r=new Map(d(this,b).map(a=>[a.options.queryHash,a])),n=[];return s.forEach(a=>{const i=d(this,O).defaultQueryOptions(a),l=r.get(i.queryHash);l?n.push({defaultedQueryOptions:i,observer:l}):n.push({defaultedQueryOptions:i,observer:new Y(d(this,O),i)})}),n},F=function(s,r){const n=d(this,b).indexOf(s);n!==-1&&(x(this,p,ge(d(this,p),n,r)),y(this,m,K).call(this))},K=function(){var s;if(this.hasListeners()){const r=d(this,w),n=y(this,m,B).call(this,d(this,p),d(this,E)),a=y(this,m,A).call(this,n,(s=d(this,P))==null?void 0:s.combine);r!==a&&z.batch(()=>{this.listeners.forEach(i=>{i(d(this,p))})})}},X);function be({queries:t,...s},r){const n=re(),a=ne(),i=ie(),l=v.useMemo(()=>t.map(h=>{const N=n.defaultQueryOptions(h);return N._optimisticResults=a?"isRestoring":"optimistic",N}),[t,n,a]);l.forEach(h=>{ae(h),le(h,i)}),oe(i);const[u]=v.useState(()=>new pe(n,l,s)),[c,o,k]=u.getOptimisticResult(l,s.combine),q=!a&&s.subscribed!==!1;v.useSyncExternalStore(v.useCallback(h=>q?u.subscribe(z.batchCalls(h)):ce,[u,q]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),v.useEffect(()=>{u.setQueries(l,s,{listeners:!1})},[l,s,u]);const S=c.some((h,N)=>_(l[N],h))?c.flatMap((h,N)=>{const f=l[N];if(f){const $=new Y(n,f);if(_(f,h))return W(f,$,i);de(h,a)&&W(f,$,i)}return[]}):[];if(S.length>0)throw Promise.all(S);const R=c.find((h,N)=>{const f=l[N];return f&&ue({result:h,errorResetBoundary:i,throwOnError:f.throwOnError,query:n.getQueryCache().get(f.queryHash),suspense:f.suspense})});if(R!=null&&R.error)throw R.error;return o(k())}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=D("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=D("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=D("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ne=()=>{const{SKU:t}=he(),{data:s,error:r,isLoading:n}=G({queryKey:["product",t],queryFn:()=>{if(!t)throw new Error("SKU is required");return xe(t)},enabled:!!t}),{data:a,isLoading:i}=G({queryKey:["productImage",s==null?void 0:s.image],queryFn:()=>s!=null&&s.image?J(s.image):Promise.resolve(null),enabled:!!(s!=null&&s.image)}),l=be({queries:((s==null?void 0:s.imagePack)||[]).map(o=>({queryKey:["productImage",o],queryFn:()=>J(o)}))}),u=l.map(o=>({url:o.data||null,error:o.error||null,isLoading:o.isLoading})),c=l.some(o=>o.isLoading);return{error:r,product:s||null,image:a||null,imagePack:u,isLoadingProduct:n,isLoadingImage:i,isLoadingImagePack:c}},Be=()=>{const t=me(),[s,r]=v.useState(1),[n,a]=v.useState(null),{product:i,image:l,imagePack:u,isLoadingProduct:c,isLoadingImage:o,isLoadingImagePack:k,error:q}=Ne();v.useEffect(()=>{l&&a(l)},[l]);const U=N=>{const f=parseInt(N.target.value);!isNaN(f)&&f>0&&r(f)},S=()=>{t("/order",{state:{productId:i==null?void 0:i.id,productName:i==null?void 0:i.name,quantity:s}})},h=i||{SKU:"",description:"",reviews:0,image:"",imagePack:[],id:"loading",name:"",price:0,rating:0,stock:0,category:[],longDescription:"",wood:"",weight:"",height:"",length:"",width:"",shipmentPrice:0};return e.jsx("div",{className:"dark:bg-zinc-900 dark:text-white min-h-screen",dir:"rtl",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(Qe,{product:h,isLoading:c}),e.jsxs("div",{className:"lg:grid lg:grid-cols-2 lg:gap-x-8",children:[e.jsx(Ee,{image:l,imagePack:u,isLoadingImage:o||c,isLoadingImagePack:k||c,selectedImage:n,setSelectedImage:a,name:h.name}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[c?e.jsx(g,{className:"h-10 w-3/4"}):e.jsx("h1",{className:"text-3xl font-extrabold text-zinc-900 dark:text-stone-200",children:h.name}),e.jsx(Ce,{product:h,isLoading:c})]}),e.jsx(we,{product:h,isLoading:c}),e.jsx(ve,{product:h,isLoading:c}),e.jsx(Le,{product:h,isLoading:c}),e.jsxs("div",{className:"border-t border-stone-200 dark:border-stone-700 pt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Pe,{product:h,isLoading:c}),e.jsx(ke,{quantity:s,setQuantity:r,handleQuantityChange:U,isDisabled:c})]}),e.jsx(Oe,{handleOrder:S,isDisabled:c}),e.jsx(Re,{})]})]})]})]})})};function ve({product:t,isLoading:s}){return s?e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-stone-200 mb-2",children:"מידע נוסף"}),e.jsx(g,{className:"h-48 w-full"})]}):e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-stone-200 mb-2",children:"מידע נוסף"}),e.jsxs("div",{className:"text-stone-600 dark:text-stone-400 space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-medium",children:"Wood"}),e.jsx("span",{children:t==null?void 0:t.wood})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-medium",children:"Weight"}),e.jsx("span",{children:t.weight})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-medium",children:"Height"}),e.jsx("span",{children:t.height})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-medium",children:"Length"}),e.jsx("span",{children:t.length})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-medium",children:"Width"}),e.jsx("span",{children:t.width})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-medium",children:"Shipment Price"}),e.jsx("span",{children:t.shipmentPrice?I(t.shipmentPrice):I(0)})]})]})]})}function we({product:t,isLoading:s}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-stone-200 mb-2",children:"תיאור"}),s?e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{className:"h-4 w-full"}),e.jsx(g,{className:"h-4 w-5/6"}),e.jsx(g,{className:"h-4 w-4/6"})]}):e.jsx("p",{className:"text-stone-600 dark:text-stone-400",children:t.longDescription})]})}function ke({quantity:t,setQuantity:s,handleQuantityChange:r,isDisabled:n}){return e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:()=>s(t+1),className:"p-2 border border-stone-300 dark:border-stone-700 rounded-r-md bg-stone-50 text-stone-500 hover:bg-stone-100 dark:bg-zinc-900 dark:text-white disabled:opacity-50",disabled:n,children:"+"}),e.jsx("input",{type:"number",id:"quantity",name:"quantity",min:"1",value:t,onChange:r,className:"p-2 w-16 border-t border-b border-stone-300 dark:border-stone-700 text-center focus:ring-indigo-500 focus:border-indigo-500 rounded-none dark:bg-zinc-900 dark:text-white disabled:opacity-50",disabled:n}),e.jsx("button",{type:"button",onClick:()=>t>1&&s(t-1),className:"p-2 border border-stone-300 dark:border-stone-700 rounded-l-md bg-stone-50 text-stone-500 hover:bg-stone-100 dark:bg-zinc-900 dark:text-white disabled:opacity-50",disabled:n,children:"-"}),e.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-stone-600 dark:text-stone-400 mr-4",children:"Quantity"})]})}function Oe({handleOrder:t,isDisabled:s}){return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(Z,{to:"/contact",className:"flex-1 bg-stone-100 text-stone-800 px-6 py-3 rounded-md font-medium hover:bg-stone-200 transition-colors flex items-center justify-center disabled:opacity-50",children:["Ask a Question",e.jsx(ee,{className:"h-5 w-5 mr-2"})]}),e.jsxs("button",{type:"button",onClick:t,disabled:s,className:"flex-1 bg-indigo-600 text-white px-6 py-3 rounded-md font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center disabled:opacity-50",children:["Order Now",e.jsx(ye,{className:"h-5 w-5 mr-2"})]})]})}function Le({product:t,isLoading:s}){return s?e.jsx(g,{className:"h-6 w-24 mb-6"}):e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:`h-3 w-3 rounded-full ${(t==null?void 0:t.stock)===0?"bg-red-500":"bg-green-500"}`}),e.jsxs("span",{className:"text-sm font-medium text-stone-600 dark:text-stone-400",children:["in stock: ",t.stock]})]})}function Pe({product:t,isLoading:s}){return s?e.jsx(g,{className:"h-8 w-32"}):e.jsx("p",{className:"text-3xl font-bold text-zinc-900 dark:text-stone-200",children:I(t.price)})}function Re(){return e.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"להזמנות גדולות ניתן לפנות לשירות לקוחות"]})}function Ce({product:t,isLoading:s}){return s?e.jsx(g,{className:"h-5 w-28"}):e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((r,n)=>e.jsx("svg",{className:`h-5 w-5 ${n<Math.floor(t.rating)?"text-yellow-400":"text-gray-300 dark:text-stone-400"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-stone-400",children:t.rating})]})}function Qe({product:t,isLoading:s}){return e.jsxs("nav",{className:"flex items-center justify-between text-sm font-medium mb-8",dir:"ltr",children:[e.jsxs(Z,{to:"/products",className:"hover:text-gray-900 dark:hover:text-white flex items-center",children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),"Back to Products"]}),s?e.jsx(g,{className:"h-6 w-24"}):e.jsx(fe,{cat:t.category,type:"detail"})]})}function Ee({isLoadingImage:t,isLoadingImagePack:s,image:r,imagePack:n,selectedImage:a,setSelectedImage:i,name:l}){return e.jsxs("div",{className:"mb-8 lg:mb-0",children:[e.jsx("div",{className:"aspect-square w-full rounded-lg overflow-hidden mb-4",children:t||!a?e.jsx(g,{className:"w-full h-full"}):e.jsx("img",{src:a,alt:l,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:s?Array(4).fill(0).map((u,c)=>e.jsx("div",{className:"aspect-square rounded-md overflow-hidden",children:e.jsx(g,{className:"w-full h-full"})},c)):n&&n.map((u,c)=>u.url?e.jsx("div",{className:`aspect-square cursor-pointer rounded-md overflow-hidden ${a===u.url?"ring-2 ring-indigo-500":""}`,onClick:()=>u.url&&i(u.url),children:u.isLoading?e.jsx(g,{className:"w-full h-full"}):e.jsx("img",{src:u.url,alt:`${l} thumbnail ${c+1}`,className:"w-full h-full object-cover"})},c):e.jsx("div",{className:"aspect-square rounded-md overflow-hidden",children:e.jsx(g,{className:"w-full h-full"})},c))})]})}export{Be as default};
