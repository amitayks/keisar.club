var $=a=>{throw TypeError(a)};var I=(a,e,t)=>e.has(a)||$("Cannot "+t);var c=(a,e,t)=>(I(a,e,"read from private field"),t?t.call(a):e.get(a)),f=(a,e,t)=>e.has(a)?$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),m=(a,e,t,i)=>(I(a,e,"write to private field"),i?i.call(a,t):e.set(a,t),t),y=(a,e,t)=>(I(a,e,"access private method"),t);import{d as Z,n as S,e as ee,Q as Y,g as se,h as te,i as re,r as w,k as ie,l as ae,m as ne,o as oe,s as _,p as T,w as ce,q as le,c as z,t as ue,u as U,j as s,a as de,L as G}from"./index-C6im8Sss.js";import{a as me}from"./apiProduct--kH9GX82.js";import{a as J}from"./apiImages-rVhFzkXT.js";import"./supabase-B-ejfR2V.js";function V(a,e){return a.filter(t=>!e.includes(t))}function he(a,e,t){const i=a.slice(0);return i[e]=t,i}var R,x,Q,C,p,k,E,q,L,d,M,A,B,F,H,X,ge=(X=class extends Z{constructor(e,t,i){super();f(this,d);f(this,R);f(this,x);f(this,Q);f(this,C);f(this,p);f(this,k);f(this,E);f(this,q);f(this,L,[]);m(this,R,e),m(this,C,i),m(this,Q,[]),m(this,p,[]),m(this,x,[]),this.setQueries(t)}onSubscribe(){this.listeners.size===1&&c(this,p).forEach(e=>{e.subscribe(t=>{y(this,d,F).call(this,e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,c(this,p).forEach(e=>{e.destroy()})}setQueries(e,t,i){m(this,Q,e),m(this,C,t),S.batch(()=>{const n=c(this,p),r=y(this,d,B).call(this,c(this,Q));m(this,L,r),r.forEach(l=>l.observer.setOptions(l.defaultedQueryOptions,i));const o=r.map(l=>l.observer),u=o.map(l=>l.getCurrentResult()),j=o.some((l,O)=>l!==n[O]);n.length===o.length&&!j||(m(this,p,o),m(this,x,u),this.hasListeners()&&(V(n,o).forEach(l=>{l.destroy()}),V(o,n).forEach(l=>{l.subscribe(O=>{y(this,d,F).call(this,l,O)})}),y(this,d,H).call(this)))})}getCurrentResult(){return c(this,x)}getQueries(){return c(this,p).map(e=>e.getCurrentQuery())}getObservers(){return c(this,p)}getOptimisticResult(e,t){const i=y(this,d,B).call(this,e),n=i.map(r=>r.observer.getOptimisticResult(r.defaultedQueryOptions));return[n,r=>y(this,d,A).call(this,r??n,t),()=>y(this,d,M).call(this,n,i)]}},R=new WeakMap,x=new WeakMap,Q=new WeakMap,C=new WeakMap,p=new WeakMap,k=new WeakMap,E=new WeakMap,q=new WeakMap,L=new WeakMap,d=new WeakSet,M=function(e,t){return t.map((i,n)=>{const r=e[n];return i.defaultedQueryOptions.notifyOnChangeProps?r:i.observer.trackResult(r,o=>{t.forEach(u=>{u.observer.trackProp(o)})})})},A=function(e,t){return t?((!c(this,k)||c(this,x)!==c(this,q)||t!==c(this,E))&&(m(this,E,t),m(this,q,c(this,x)),m(this,k,ee(c(this,k),t(e)))),c(this,k)):e},B=function(e){const t=new Map(c(this,p).map(n=>[n.options.queryHash,n])),i=[];return e.forEach(n=>{const r=c(this,R).defaultQueryOptions(n),o=t.get(r.queryHash);o?i.push({defaultedQueryOptions:r,observer:o}):i.push({defaultedQueryOptions:r,observer:new Y(c(this,R),r)})}),i},F=function(e,t){const i=c(this,p).indexOf(e);i!==-1&&(m(this,x,he(c(this,x),i,t)),y(this,d,H).call(this))},H=function(){var e;if(this.hasListeners()){const t=c(this,k),i=y(this,d,M).call(this,c(this,x),c(this,L)),n=y(this,d,A).call(this,i,(e=c(this,C))==null?void 0:e.combine);t!==n&&S.batch(()=>{this.listeners.forEach(r=>{r(c(this,x))})})}},X);function xe({queries:a,...e},t){const i=se(),n=te(),r=re(),o=w.useMemo(()=>a.map(g=>{const N=i.defaultQueryOptions(g);return N._optimisticResults=n?"isRestoring":"optimistic",N}),[a,i,n]);o.forEach(g=>{ie(g),ae(g,r)}),ne(r);const[u]=w.useState(()=>new ge(i,o,e)),[j,l,O]=u.getOptimisticResult(o,e.combine),P=!n&&e.subscribed!==!1;w.useSyncExternalStore(w.useCallback(g=>P?u.subscribe(S.batchCalls(g)):oe,[u,P]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),w.useEffect(()=>{u.setQueries(o,e,{listeners:!1})},[o,e,u]);const b=j.some((g,N)=>_(o[N],g))?j.flatMap((g,N)=>{const v=o[N];if(v){const D=new Y(i,v);if(_(v,g))return T(v,D,r);ce(g,n)&&T(v,D,r)}return[]}):[];if(b.length>0)throw Promise.all(b);const h=j.find((g,N)=>{const v=o[N];return v&&le({result:g,errorResetBoundary:r,throwOnError:v.throwOnError,query:i.getQueryCache().get(v.queryHash),suspense:v.suspense})});if(h!=null&&h.error)throw h.error;return l(O())}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=z("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),ye=()=>{const{SKU:a}=ue(),{data:e,error:t,isLoading:i}=U({queryKey:["product",a],queryFn:()=>{if(!a)throw new Error("SKU is required");return me(a)},enabled:!!a}),{data:n,isLoading:r}=U({queryKey:["productImage",e==null?void 0:e.image],queryFn:()=>e!=null&&e.image?J(e.image):void 0,enabled:!!(e!=null&&e.image)}),o=xe({queries:((e==null?void 0:e.imagePack)||[]).map(l=>({queryKey:["productImage",l],queryFn:()=>J(l)}))}),u=o.map(l=>l.data),j=o.some(l=>l.isLoading);return{error:t,product:e||null,image:n,imagePack:u,isLoadingProduct:i,isLoadingImage:r,isLoadingImagePack:j}};function be(){return s.jsx("div",{className:"mx-auto my-[4.8rem] w-16 aspect-square rounded-full animate-spin",style:{background:`radial-gradient(farthest-side, #4f46e5 94%, transparent) top/10px 10px no-repeat,
          conic-gradient(transparent 30%, #4f46e5)`,WebkitMask:"radial-gradient(farthest-side, transparent calc(100% - 10px), #000 0)"}})}const Oe=()=>{const a=de(),[e,t]=w.useState(1),[i,n]=w.useState(void 0),{product:r,image:o,imagePack:u,isLoadingProduct:j,isLoadingImage:l,isLoadingImagePack:O}=ye();if(w.useEffect(()=>{o&&n(o)},[o]),j||!r)return s.jsx(be,{});const P=b=>{const h=parseInt(b.target.value);!isNaN(h)&&h>0&&t(h)},K=()=>{a("/order",{state:{productId:r.id,productName:r.name,quantity:e}})};return s.jsx("div",{className:"bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("nav",{className:"flex items-center text-sm font-medium text-gray-500 mb-8",children:s.jsxs(G,{to:"/products",className:"hover:text-gray-900 flex items-center",children:[s.jsx(pe,{className:"h-4 w-4 mr-1"}),"Back to Products"]})}),s.jsxs("div",{className:"lg:grid lg:grid-cols-2 lg:gap-x-8",children:[s.jsxs("div",{className:"mb-8 lg:mb-0",children:[s.jsx("div",{className:"overflow-hidden rounded-lg mb-4",children:s.jsx("img",{src:i,alt:r.name,className:"w-full h-auto object-cover"})}),u&&u.length>0&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:u.map((b,h)=>b?s.jsx("div",{className:`cursor-pointer rounded-md overflow-hidden ${i===b?"ring-2 ring-indigo-500":""}`,onClick:()=>n(b),children:s.jsx("img",{src:b,alt:`${r.name} thumbnail`,className:"w-full h-20 object-cover"})},h):null)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"mb-2",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:r.category})}),s.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:r.name}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:r.price}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex items-center",children:[...Array(5)].map((b,h)=>s.jsx("svg",{className:`h-5 w-5 ${h<Math.floor(r.rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},h))}),s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[r.rating," (",r.reviews," reviews)"]})]})]}),s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:`h-3 w-3 rounded-full ${r.stock==="Available"?"bg-green-500":"bg-yellow-500"} mr-2`}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.stock})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600",children:r.longDescription})]}),s.jsx("div",{className:"mb-8",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Features"})}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mr-4",children:"Quantity"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{type:"button",onClick:()=>e>1&&t(e-1),className:"p-2 border border-gray-300 rounded-l-md bg-gray-50 text-gray-500 hover:bg-gray-100",children:"-"}),s.jsx("input",{type:"number",id:"quantity",name:"quantity",min:"1",value:e,onChange:P,className:"p-2 w-16 border-t border-b border-gray-300 text-center focus:ring-indigo-500 focus:border-indigo-500"}),s.jsx("button",{type:"button",onClick:()=>t(e+1),className:"p-2 border border-gray-300 rounded-r-md bg-gray-50 text-gray-500 hover:bg-gray-100",children:"+"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsxs("button",{type:"button",onClick:K,className:"flex-1 bg-indigo-600 text-white px-6 py-3 rounded-md font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center",children:[s.jsx(fe,{className:"h-5 w-5 mr-2"}),"Order Now"]}),s.jsxs(G,{to:"/contact",className:"flex-1 bg-gray-100 text-gray-800 px-6 py-3 rounded-md font-medium hover:bg-gray-200 transition-colors flex items-center justify-center",children:[s.jsx(W,{className:"h-5 w-5 mr-2"}),"Ask a Question"]})]}),s.jsxs("p",{className:"mt-4 text-sm text-gray-500 flex items-center",children:[s.jsx(W,{className:"h-4 w-4 mr-1"}),"For custom requirements or bulk orders, please contact us directly."]})]})]})]})]})})};export{Oe as default};
